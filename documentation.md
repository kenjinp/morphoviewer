<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [EventManager][1]
    -   [on][2]
-   [MorphologyPolycylinder][3]
-   [mergeBufferGeometries][4]
-   [mergeBufferAttributes][5]
-   [MorphologyPolyline][6]
-   [MorphologyShapeBase][7]
    -   [getTargetPoint][8]
    -   [getMorphology][9]
-   [MorphoViewer][10]
    -   [addMorphology][11]
    -   [addStlToMeshCollection][12]
    -   [destroy][13]
    -   [getCameraFieldOfView][14]
    -   [setCameraFieldOfView][15]
    -   [focusOnMorphology][16]
    -   [focusOnMesh][17]
    -   [onRaycast][18]
    -   [takeScreenshot][19]
-   [ThreeContext][20]
    -   [getCameraFieldOfView][21]
    -   [setCameraFieldOfView][22]
    -   [addStlToMeshCollection][23]
    -   [addMorphology][24]
    -   [focusOnMorphology][25]
    -   [focusOnMesh][26]
    -   [getSnapshotData][27]
    -   [destroy][28]
-   [Tools][29]
    -   [getOption][30]

## EventManager

The EventManager deals with events, create them, call them.
This class is mostly for being inherited from.

### on

Define an event, with a name associated with a function

**Parameters**

-   `eventName` **[String][31]** Name to give to the event
-   `callback` **[Function][32]** function associated to the even

## MorphologyPolycylinder

**Extends MorphologyShapeBase**

The MorphologyPolycylinder is a tubular representation of a morphology, using cylinders.
this alternative to MorphologyPolyline is heavier on CPU and GPU so is more made when
displaying a small number of morphologies.
MorphologyPolycylinder extends from THREE.Object so that it's easy to integrate.
It's constructor

**Parameters**

-   `morpho` **[Object][33]** raw object that describes a morphology (usually straight from a JSON file)
-   `options` **[object][33]** the option object

## mergeBufferGeometries

**Parameters**

-   `geometries` **[Array][34]&lt;THREE.BufferGeometry>** 
-   `useGroups`  

Returns **THREE.BufferGeometry** 

## mergeBufferAttributes

**Parameters**

-   `attributes` **[Array][34]&lt;THREE.BufferAttribute>** 

Returns **THREE.BufferAttribute** 

## MorphologyPolyline

**Extends MorphologyShapeBase**

The MorphologyPolyline is the simplest 3D representation of a morphology, using
simple polylines.
Compared to its cylinder-based alternative (MorphologyPolycylinder), this one
is more suitable for displaying several morphologies (up to maybe a hundred,
depending on length and machine performance)
MorphologyPolyline extends from THREE.Object so that it's easy to integrate.
It's constructor

**Parameters**

-   `morpho` **Morphology** raw object that describes a morphology (usually straight from a JSON file)
-   `options` **[object][33]** the option object

## MorphologyShapeBase

**Extends THREE.Object3D**

This is the base class for `MorphologyPolyline` and `MorphologyPolycylinder`.
It handles the common features, mainly related to soma creation

**Parameters**

-   `morpho` **[Object][33]** raw object that describes a morphology (usually straight from a JSON file)
-   `options` **[object][33]** the option object

### getTargetPoint

Get the point to target when using the method lookAt. If the soma is valid,
this will be the center of the soma. If no soma is valid, it will be the
center of the box

Returns **[Array][34]** center with the shape [x: Number, y: Number, z: Number]

### getMorphology

Get the morphology object tied to _this_ mesh

Returns **morphologycorejs.Morphology** 

## MorphoViewer

The MorphoViewer class is the entry point object of the MorphoViewer project
and is the only object the user should be dealing with.

**Parameters**

-   `divObj`   (optional, default `null`)

### addMorphology

Add a morphology to the collection so that it displays.

**Parameters**

-   `morphoObj` **([Object][33] | morphologycorejs.Morphology)** describes the morphology of a neuron.
    This data comes straight from the JSON file or it can also be a Morphology object from `morphologycorejs`
-   `options` **[object][33]** the optional values
    -   `options.name` **[String][31]** The name to give to this morphology. Will be used as an identifier for several operations
    -   `options.asPolyline` **[Boolean][35]** if true: shows a polyline view. false: shows a tubular view (default: true)
    -   `options.focusOn` **[Boolean][35]** if true, the camera will focus on this added morphology. If false, the camera will not change
    -   `options.color` **[Number][36]** the color of the polyline.
        If provided, the whole neurone will be of the given color, if not provided,
        the axon will be green, the basal dendrite will be red and the apical dendrite will be green
    -   `options.somaMode` **[String][31]** "default" to display only the soma data or "fromOrphanSections" to build a soma using the orphan sections
    -   `options.onDone` **[Function][32]** callback when the morphology is displayed. Called with the name (given or generated) of the morphology
    -   `options.distance` **[Number][36]** the distance between the camera and the soma. Only relevant if `onFocus` is `true`

### addStlToMeshCollection

Adds a mesh from its URL. The mesh has to encoded into the STL format

**Parameters**

-   `url` **[String][31]** the url of the STL file
-   `options` **[Object][33]** the options object
    -   `options.name` **[String][31]** optional name of this mesh (useful for further operations such as centering the view)
    -   `options.focusOn` **[Boolean][35]** if true, the camera will focus on this added mesh. If false, the camera will not change

### destroy

Kill all to save up memory, stop the annimation, removes events, delete the canvas

### getCameraFieldOfView

Get the field of view angle of the camera, in degrees

Returns **[Number][36]** 

### setCameraFieldOfView

Define the camera field of view, in degrees

**Parameters**

-   `fov` **[Number][36]** the fov

### focusOnMorphology

Make the camera look at the soma of a morphology (or the center of it's bounding box
if the neuron does not have soma data)

**Parameters**

-   `name` **[String][31]** the name of the neuron to focus on
-   `distance` **[Number][36]** distance from the soma center (in world space, most likely microns)

### focusOnMesh

Make the camera focus on the given mesh

**Parameters**

-   `name` **[String][31]** name of the mesh

### onRaycast

Define a callback associated with clicking on a section. The callback function
is called with the `morphologycorejs.Section` instance as arguments (or `undefined`)

**Parameters**

-   `cb`  

### takeScreenshot

**Parameters**

-   `filename`   (optional, default `'capture.png'`)

## ThreeContext

**Extends EventManager**

ThreeContext creates a WebGL context using THREEjs. It also handle mouse control.
A MorphologyPolyline instance is added to it.
An event can be associated to a ThreeContext instance: `onRaycast` with the method
`.on("onRaycast", function(s){...})` where `s` is the section object being raycasted.

**Parameters**

-   `divObj` **DONObject** the div object as a DOM element.
    Will be used to host the WebGL context
    created by THREE (optional, default `null`)

### getCameraFieldOfView

Get the field of view angle of the camera, in degrees

Returns **[Number][36]** 

### setCameraFieldOfView

Define the camera field of view, in degrees

**Parameters**

-   `fov` **[Number][36]** the fov

### addStlToMeshCollection

Adds a mesh from its URL. The mesh has to encoded into the STL format

**Parameters**

-   `url` **[String][31]** the url of the STL file
-   `options` **[Object][33]** the options object
    -   `options.name` **[String][31]** optional name of this mesh (useful for further operations such as centering the view)
    -   `options.focusOn` **[Boolean][35]** if true, the camera will focus on this added mesh. If false, the camera will not change
    -   `options.opacity` **[Number][36]** the opacity of the mesh
    -   `options.color` **[Number][36]** the color of the mesh
    -   `options.wireframe` **[Number][36]** only the wireframe will display if true. If false, the regular mesh will show-   @param {Number} options.wireframe - only the wireframe will display if true. If false, the regular mesh will show
    -   `options.onDone` **[Function][32]** callback to be called when the mesh is added. Called with the name of the mesh in argument

### addMorphology

Add a MorphoPolyline object (which are ThreeJS Object3D) into the scene of this
ThreeContext.

**Parameters**

-   `morphoMesh` **MorphoPolyline** a MorphoPolyline instance
-   `options` **[Object][33]** the option object
    -   `options.name` **[String][31]** the identifier to give to the MorphoPolyline instance within a local collection
    -   `options.focusOn` **[Boolean][35]** if true, the camera will focus on this added morphology. If false, the camera will not change
    -   `options.onDone` **[Function][32]** callback to be called when the morphology polyline is added. Called with the name of the morpho in argument

### focusOnMorphology

Make the camera focus on a specific morphology

**Parameters**

-   `name` **([String][31] | null)** name of the morphology in the collection. If `null`, takes the first one (optional, default `null`)
-   `distance`   (optional, default `DEFAULT_FOCUS_DISTANCE`)

### focusOnMesh

Focus on a mesh, given its name

**Parameters**

-   `name` **[string][31]** name of the mesh to focus on

### getSnapshotData

Get the png image data as base64, in order to later, export as a file

### destroy

Kills the scene, interaction, animation and reset all objects to null

## Tools

Some handy static functions to do stuff that are not strictly related to the business of the project

### getOption

Handy function to deal with option object we pass in argument of function.
Allows the return of a default value if the `optionName` is not available in
the `optionObj`

**Parameters**

-   `optionObj` **[Object][33]** the object that contain the options
-   `optionName` **[String][31]** the name of the option desired, attribute of `optionObj`
-   `optionDefaultValue` **any** default values to be returned in case `optionName` is not an attribute of `optionObj`

[1]: #eventmanager

[2]: #on

[3]: #morphologypolycylinder

[4]: #mergebuffergeometries

[5]: #mergebufferattributes

[6]: #morphologypolyline

[7]: #morphologyshapebase

[8]: #gettargetpoint

[9]: #getmorphology

[10]: #morphoviewer

[11]: #addmorphology

[12]: #addstltomeshcollection

[13]: #destroy

[14]: #getcamerafieldofview

[15]: #setcamerafieldofview

[16]: #focusonmorphology

[17]: #focusonmesh

[18]: #onraycast

[19]: #takescreenshot

[20]: #threecontext

[21]: #getcamerafieldofview-1

[22]: #setcamerafieldofview-1

[23]: #addstltomeshcollection-1

[24]: #addmorphology-1

[25]: #focusonmorphology-1

[26]: #focusonmesh-1

[27]: #getsnapshotdata

[28]: #destroy-1

[29]: #tools

[30]: #getoption

[31]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[32]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[33]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[34]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[36]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
