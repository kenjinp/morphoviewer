<html>
<head>
  <title>Test</title>

  <style>
    #fileInput {
      position: absolute;
      top:0;
      left: 0;
    }

  </style>

</head>
<body>
  <!-- importing the automatically build module -->
  <script src="../dist/morphoviewer.js"></script>

  <div id="threedeediv"></div>


  Open JSON morphology file file <input type="file" id="fileInput" multiple>

  <script>
    var fileInput = document.getElementById('fileInput');

    // init the morpho viewer
    let threedeediv = document.getElementById( 'threedeediv' )
    let morphoViewer = new morphoviewer.MorphoViewer(threedeediv)

    // optional: we load a brain model. Last param is for focusing on it
    morphoViewer.addStlToMeshCollection('../data/meshes/mask_smooth_simple.stl', "brain", true)

    // manages file input
    fileInput.addEventListener('change', function(e) {
      var files = e.target.files;

      if( !files.length ){
        return;
      }


      for(let i=0; i<files.length; i++){
        let reader = new FileReader()

        reader.onloadend = function(event) {
          var buffer = event.target.result
          readMorphoFile(buffer)
        }

        reader.readAsText( files[i] )
      }

  	});


    //  deals with the JSON content of the file
    // @param {String} buff - buff is a json string
    function readMorphoFile( buff ){
      let rawMorphoObj = JSON.parse( buff )

      // we display a morpho, second param is it's name (null: a autogenarated will do)
      // last param is "do we focus the camera on it"
      morphoViewer.addMorphology (rawMorphoObj, null, false)
    }




/*

    // the foo object is part of our es6module module
    var foo = new es6module.Foo(20, 30);

    // do something with foo
    foo.printAnAttribute();
    foo.setAnAttribute(34)
    foo.printAnAttribute();
    */
  </script>

</body>
</html>
